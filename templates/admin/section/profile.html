{% extends "admin/admin.html" %}

{% block content %}

<div class="fade-in">

    <div class="row">

        <!-- ================= LEFT ================= -->
        <div class="col-lg-8">

            <h2 class="fw-bold mb-4">Admin Profile</h2>

            <div class="table-card">

                <div class="row">

                    <!-- Avatar -->
                    <div class="col-md-4 text-center">

                        <div class="user-avatar mx-auto mb-3" style="width:100px;height:100px;font-size:2.5rem;">
                            {{ user.name[0] }}
                        </div>

                        <h6 class="fw-bold">
                            {{ user.name }}
                        </h6>

                        <p class="text-muted small">
                            {{ user.role|capitalize }}
                        </p>

                        <span class="status-badge status-active">
                            Verified
                        </span>

                    </div>


                    <!-- Profile Form -->
                    <div class="col-md-8">

                        <h5 class="fw-bold mb-4">
                            Personal Information
                        </h5>

                        <form method="POST">

                            <div class="row g-3">

                                <div class="col-md-6">

                                    <label class="form-label">
                                        Full Name *
                                    </label>

                                    <input type="text" name="name" class="form-control" value="{{ user.name }}"
                                        required>

                                </div>


                                <div class="col-md-6">

                                    <label class="form-label">
                                        Email *
                                    </label>

                                    <input type="email" name="email" class="form-control" value="{{ user.email }}"
                                        required>

                                </div>


                                <div class="col-md-6">

                                    <label class="form-label">
                                        Phone
                                    </label>

                                    <input type="text" name="phone" class="form-control">

                                </div>


                                <div class="col-md-6">

                                    <label class="form-label">
                                        Role
                                    </label>

                                    <input type="text" class="form-control" value="{{ user.role }}" readonly>

                                </div>


                                <div class="col-12">

                                    <label class="form-label">
                                        Bio
                                    </label>

                                    <textarea name="bio" class="form-control" rows="3"></textarea>

                                </div>


                                <div class="col-12">

                                    <button type="submit" class="btn btn-primary px-4">
                                        Save Changes
                                    </button>

                                </div>

                            </div>

                        </form>

                    </div>

                </div>

            </div>

        </div>


        <!-- ================= RIGHT ================= -->
        <div class="col-lg-4">

            <h2 class="fw-bold mb-4">Security</h2>


            <!-- CHANGE PASSWORD -->
            <div class="table-card mb-4">

                <h6 class="fw-bold mb-3">Change Password</h6>

                <form id="passwordForm" onsubmit="return changePassword()">

                    <div class="mb-3">
                        <label class="form-label small">Current Password *</label>
                        <input type="password" class="form-control" id="currentPassword" required>
                    </div>


                    <div class="mb-3">
                        <label class="form-label small">New Password *</label>
                        <input type="password" class="form-control" id="newPassword" required>

                        <small class="text-muted">
                            Must be 6–12 characters
                        </small>
                    </div>


                    <div class="mb-3">
                        <label class="form-label small">Confirm Password *</label>
                        <input type="password" class="form-control" id="confirmPassword" required>
                    </div>


                    <button type="submit" class="btn btn-primary w-100">
                        Update Password
                    </button>

                </form>

            </div>


            <!-- LOGIN ACTIVITY -->
            <div class="table-card">

                <h6 class="fw-bold mb-3">Login Activity</h6>

                <div class="activity-timeline">

                    {% for log in logs %}

                    <div class="activity-item">

                        <div class="activity-dot user"></div>

                        <div>

                            <p class="mb-1">
                                <strong>Login</strong>
                            </p>

                            <small class="text-muted">
                                {{ log.login_time.strftime('%d %b %Y, %I:%M %p') }}
                                • {{ log.ip_address }}
                            </small>

                        </div>

                    </div>

                    {% else %}

                    <p class="text-muted small">
                        No login activity found
                    </p>

                    {% endfor %}

                </div>

            </div>

        </div>

    </div>

</div>

{% endblock %}